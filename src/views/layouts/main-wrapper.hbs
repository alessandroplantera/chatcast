<main class="main-layout">
	<div class="layout js-layout is-center-collapsed is-right-collapsed" id="app-layout">
		<!-- Left column: chat list (always visible) -->
		<section class="layout__col layout__col--left" id="col-left" aria-labelledby="left-label">
			<div class="upcoming-chat-banner" id="upcoming-chat-banner">
				<p class="upcoming-chat-banner__date" id="upcoming-chat-date"></p>
				<p class="upcoming-chat-banner__participants" id="upcoming-chat-participants">Loading...</p>
				<p class="upcoming-chat-banner__topic" id="upcoming-chat-topic"></p>
			</div>
			{{> components/organisms/chat-list }}
		</section>

		<!-- Center column: message thread (hidden until a chat is selected) -->
		<section class="layout__col layout__col--center" id="col-center" role="region" aria-live="polite" hidden>
			<header class="thread-header">
				<button class="icon-btn js-thread-close" aria-controls="col-center" aria-expanded="true" aria-label="Close message thread">[x]</button>
				<div id="thread-header-content" class="conversation-list__item conversation-list__item--header">
					<!-- Header content will be populated by JavaScript -->
				</div>
			</header>
			<div id="message-thread-root" class="message-thread">
				{{> components/organisms/message-thread }}
			</div>
		</section>
		<section class="layout__col layout__col--right sidebar is-collapsed" id="col-right" aria-expanded="false">
			<!-- Collapsed vertical tab (visible only when sidebar is closed) -->
			<button class="sidebar-tab js-sidebar-open" aria-controls="col-right" aria-label="Open About panel">
				<span class="sidebar-tab__label">ABOUT</span>
				<span class="sidebar-tab__icon">
					<img src="/graphics/up-arrow.svg" alt="" class="sidebar-tab__arrow" />
				</span>
				<span class="sidebar-tab__close">[-]</span>
			</button>
			<!-- Expanded panel (hidden when collapsed) -->
			<div class="sidebar__panel" id="sidebar-panel" hidden>
				<!-- Tabs header -->
				<header class="sidebar__tabs">
					<button class="sidebar__tab js-tab-about" id="sidebar-tab-about">ABOUT
						<span class="icon-btn sidebar__close js-sidebar-close" aria-controls="col-right" aria-label="Close panel">[-]</span>
					</button>
					<button class="sidebar__tab js-tab-guest" id="sidebar-tab-guest" hidden>
						<span class="sidebar__tab-title" id="guest-tab-title">GUEST</span>
						<span class="sidebar__tab-close js-guest-card-close">[x]</span>
					</button>
				</header>
				
				<!-- Tab content: ABOUT -->
				<div class="sidebar__tab-content is-active" id="sidebar-content-about">
					<div class="sidebar__content">
						{{> components/organisms/sidebar }}
					</div>
				</div>
				
				<!-- Tab content: GUEST (from Notion CMS) -->
				<div class="sidebar__tab-content" id="sidebar-content-guest">
					<article class="guest-card is-visible" id="guest-card">
						<div class="guest-card__body">
							<div class="guest-card__cover" id="guest-card-cover"></div>
							<div class="guest-card__content" id="guest-card-content">
								<!-- Content from Notion will be injected here -->
							</div>
						</div>
					</article>
					<!-- Hidden title for JS -->
					<span hidden id="guest-card-title"></span>
				</div>
			</div>
		</section>
	</div>
	<script src="/js/layout-toggles.js"></script>
</main>